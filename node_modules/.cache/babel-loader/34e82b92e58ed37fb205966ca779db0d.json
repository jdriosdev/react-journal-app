{"ast":null,"code":"import _regeneratorRuntime from\"/home/juan/dev/portfolio/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/juan/dev/portfolio/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/juan/dev/portfolio/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Switch,Redirect}from\"react-router-dom\";import{JournalScreen}from'../components/journal/JournalScreen';import{AuthRouter}from'./AuthRouter';import{firebase}from'../firebase/firebase-config';import{useDispatch}from'react-redux';import{login}from'../actions/auth';import{PublicRoute}from'./PublicRoute';import{PrivateRoute}from'./PrivateRoute';import{startLoadingNotes}from'../actions/notes';export var AppRouter=function AppRouter(){var dispatch=useDispatch();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),checking=_useState2[0],setChecking=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoggedIn=_useState4[0],setIsLoggedIn=_useState4[1];useEffect(function(){firebase.auth().onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(user===null||user===void 0?void 0:user.uid){dispatch(login(user.uid,user.displayName));setIsLoggedIn(true);dispatch(startLoadingNotes(user.uid));}else{setIsLoggedIn(false);}setChecking(false);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[dispatch,setChecking,setIsLoggedIn]);if(checking){return/*#__PURE__*/React.createElement(\"h1\",null,\"Loading...\");}return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(PublicRoute,{path:\"/auth\",component:AuthRouter,isAuth:isLoggedIn}),/*#__PURE__*/React.createElement(PrivateRoute,{exact:true,path:\"/\",component:JournalScreen,isAuth:isLoggedIn}),/*#__PURE__*/React.createElement(Redirect,{to:\"/auth/login\"}))));};","map":{"version":3,"sources":["/home/juan/dev/portfolio/react-2/src/routers/AppRouter.js"],"names":["React","useEffect","useState","BrowserRouter","Router","Switch","Redirect","JournalScreen","AuthRouter","firebase","useDispatch","login","PublicRoute","PrivateRoute","startLoadingNotes","AppRouter","dispatch","checking","setChecking","isLoggedIn","setIsLoggedIn","auth","onAuthStateChanged","user","uid","displayName"],"mappings":"kcAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OACEC,aAAa,GAAIC,CAAAA,MADnB,CAEEC,MAFF,CAGEC,QAHF,KAIO,kBAJP,CAKA,OAASC,aAAT,KAA8B,qCAA9B,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAAQC,QAAR,KAAuB,6BAAvB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,KAAT,KAAsB,iBAAtB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAASC,YAAT,KAA6B,gBAA7B,CACA,OAASC,iBAAT,KAAkC,kBAAlC,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAE7B,GAAMC,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CAF6B,cAIIR,QAAQ,CAAC,IAAD,CAJZ,wCAItBe,QAJsB,eAIZC,WAJY,8BAKOhB,QAAQ,CAAC,KAAD,CALf,yCAKtBiB,UALsB,eAKVC,aALU,eAO7BnB,SAAS,CAAC,UAAM,CAEdQ,QAAQ,CAACY,IAAT,GAAgBC,kBAAhB,0FAAmC,iBAAMC,IAAN,kHACjC,GAAIA,IAAJ,SAAIA,IAAJ,iBAAIA,IAAI,CAAEC,GAAV,CAAgB,CACdR,QAAQ,CAACL,KAAK,CAACY,IAAI,CAACC,GAAN,CAAWD,IAAI,CAACE,WAAhB,CAAN,CAAR,CACAL,aAAa,CAAC,IAAD,CAAb,CAEAJ,QAAQ,CAACF,iBAAiB,CAACS,IAAI,CAACC,GAAN,CAAlB,CAAR,CAED,CAND,IAMO,CACLJ,aAAa,CAAG,KAAH,CAAb,CACD,CAEDF,WAAW,CAAC,KAAD,CAAX,CAXiC,sDAAnC,gEAcD,CAhBQ,CAgBN,CAACF,QAAD,CAAWE,WAAX,CAAwBE,aAAxB,CAhBM,CAAT,CAkBA,GAAIH,QAAJ,CAAc,CACZ,mBACE,2CADF,CAGD,CAED,mBACI,oBAAC,MAAD,mBACE,4CACE,oBAAC,MAAD,mBACE,oBAAC,WAAD,EAEE,IAAI,CAAC,OAFP,CAGE,SAAS,CAAET,UAHb,CAIE,MAAM,CAAEW,UAJV,EADF,cAOE,oBAAC,YAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,GAFP,CAGE,SAAS,CAAEZ,aAHb,CAIE,MAAM,CAAEY,UAJV,EAPF,cAaE,oBAAC,QAAD,EAAU,EAAE,CAAC,aAAb,EAbF,CADF,CADF,CADJ,CAqBD,CApDM","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Redirect\n} from \"react-router-dom\";\nimport { JournalScreen } from '../components/journal/JournalScreen'\nimport { AuthRouter } from './AuthRouter'\nimport {firebase} from '../firebase/firebase-config';\nimport { useDispatch } from 'react-redux';\nimport { login } from '../actions/auth';\nimport { PublicRoute } from './PublicRoute';\nimport { PrivateRoute } from './PrivateRoute';\nimport { startLoadingNotes } from '../actions/notes';\n\nexport const AppRouter = () => {\n\n  const dispatch = useDispatch();\n\n  const [checking, setChecking ] = useState(true)\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\n\n  useEffect(() => {\n    \n    firebase.auth().onAuthStateChanged(async(user) => {\n      if( user?.uid ) {\n        dispatch(login(user.uid, user.displayName));\n        setIsLoggedIn(true)\n\n        dispatch(startLoadingNotes(user.uid))\n\n      } else {\n        setIsLoggedIn ( false )\n      }\n\n      setChecking(false)\n    })\n\n  }, [dispatch, setChecking, setIsLoggedIn])\n\n  if (checking) {\n    return ( \n      <h1>Loading...</h1>\n    )\n  }\n\n  return (  \n      <Router>\n        <div>\n          <Switch>\n            <PublicRoute \n              \n              path='/auth'\n              component={AuthRouter}\n              isAuth={isLoggedIn}\n            />\n            <PrivateRoute\n              exact\n              path='/'\n              component={JournalScreen}\n              isAuth={isLoggedIn}\n            />\n            <Redirect to='/auth/login' />\n          </Switch>\n        </div>\n      </Router>        \n  )\n}\n"]},"metadata":{},"sourceType":"module"}