{"ast":null,"code":"import _regeneratorRuntime from\"/home/juan/dev/portfolio/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/juan/dev/portfolio/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Swal from'sweetalert2';import{types}from\"../types/types\";import{firebase,googleAuthProvider}from'../firebase/firebase-config';import{finishLoading,startLoading}from\"./ui\";import{noteLogout}from'./notes';export var startLoginEmailPassword=function startLoginEmailPassword(email,password){return function(dispatch){dispatch(startLoading());firebase.auth().signInWithEmailAndPassword(email,password).then(function(_ref){var user=_ref.user;dispatch(login(user.uid,user.displayName));dispatch(finishLoading());}).catch(function(e){dispatch(finishLoading());Swal.fire('Opss!',e.message,'error');});};};export var startRegisterWithEmailPasswordName=function startRegisterWithEmailPasswordName(email,password,name){return function(dispatch){firebase.auth().createUserWithEmailAndPassword(email,password).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=_ref2.user;_context.next=3;return user.updateProfile({displayName:name});case 3:console.log(user);dispatch(login(user.uid,user.displayName));case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}()).catch(function(e){Swal.fire('Opss!',e.message,'error');});};};export var startGoogleLogin=function startGoogleLogin(){return function(dispatch){firebase.auth().signInWithPopup(googleAuthProvider).then(function(_ref4){var user=_ref4.user;dispatch(login(user.uid,user.displayName));});};};export var login=function login(uid,displayName){return{type:types.login,payload:{uid:uid,displayName:displayName}};};export var startLogout=function startLogout(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return firebase.auth().signOut();case 2:dispatch(logout());dispatch(noteLogout());case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref5.apply(this,arguments);};}();};export var logout=function logout(){return{type:types.logout};};","map":{"version":3,"sources":["/home/juan/dev/portfolio/react-2/src/actions/auth.js"],"names":["Swal","types","firebase","googleAuthProvider","finishLoading","startLoading","noteLogout","startLoginEmailPassword","email","password","dispatch","auth","signInWithEmailAndPassword","then","user","login","uid","displayName","catch","e","fire","message","startRegisterWithEmailPasswordName","name","createUserWithEmailAndPassword","updateProfile","console","log","startGoogleLogin","signInWithPopup","type","payload","startLogout","signOut","logout"],"mappings":"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","sourcesContent":["import Swal from 'sweetalert2';\n\nimport { types } from \"../types/types\"\nimport { firebase, googleAuthProvider } from '../firebase/firebase-config'\nimport { finishLoading, startLoading } from \"./ui\"\nimport { noteLogout } from './notes';\n\n\nexport const startLoginEmailPassword = (email, password) => {\n  return (dispatch) => {\n    \n    dispatch(startLoading())\n\n    firebase.auth().signInWithEmailAndPassword(email, password)\n      .then(({user})=> {\n        dispatch(login(user.uid, user.displayName));\n        dispatch(finishLoading())\n      })\n      .catch(e => {\n        dispatch(finishLoading())\n        Swal.fire('Opss!', e.message, 'error');\n      })\n  }\n}\n\nexport const startRegisterWithEmailPasswordName = ( email, password, name) => {\n  return ( dispatch ) => {\n    firebase.auth().createUserWithEmailAndPassword(email, password)\n    .then( async({user}) => {\n\n      await user.updateProfile({displayName: name})\n\n      console.log(user)\n      dispatch(\n        login( user.uid, user.displayName)\n      )\n    }).catch( e => {\n      Swal.fire('Opss!', e.message, 'error');\n    })\n  }\n}\n\nexport const startGoogleLogin = () => {\n  return (dispatch) => {\n    firebase.auth().signInWithPopup( googleAuthProvider )\n      .then( ({user}) => {\n        dispatch(\n          login( user.uid, user.displayName)\n        )\n      })\n  }\n}\n\n\nexport const login = (uid, displayName) => {\n  return {\n    type: types.login,\n    payload: {\n      uid,\n      displayName \n    }\n  }\n}\n\nexport const startLogout = () => {\n  return async ( dispatch ) => {\n    await firebase.auth().signOut();\n    \n    dispatch( logout() )\n    dispatch( noteLogout() )\n  }\n}\n\nexport const logout = () => ({\n  type: types.logout\n})\n\n"]},"metadata":{},"sourceType":"module"}