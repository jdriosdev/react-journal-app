{"ast":null,"code":"import _objectSpread from\"/home/juan/dev/portfolio/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/juan/dev/portfolio/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/juan/dev/portfolio/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Swal from'sweetalert2';import{db}from'../firebase/firebase-config';import{fileUpload}from'../helpers/fileUpload';import{loadNotes}from'../helpers/loadNotes';import{types}from'../types/types';export var startNewNote=function startNewNote(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var uid,newNote,doc;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:uid=getState().auth.uid;newNote={title:'',body:'',date:new Date().getTime()};_context.next=4;return db.collection(\"\".concat(uid,\"/journal/notes\")).add(newNote);case 4:doc=_context.sent;dispatch(activeNote(doc.id,newNote));dispatch(addNewNote(doc.id,newNote));case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var activeNote=function activeNote(id,note){return{type:types.notesActive,payload:_objectSpread({id:id},note)};};export var addNewNote=function addNewNote(id,note){return{type:types.notesAddNew,payload:_objectSpread({id:id},note)};};export var startLoadingNotes=function startLoadingNotes(uid){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var notes;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return loadNotes(uid);case 2:notes=_context2.sent;dispatch(setNotes(notes));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref2.apply(this,arguments);};}();};export var setNotes=function setNotes(notes){return{type:types.notesLoad,payload:notes};};export var startSaveNote=function startSaveNote(note){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var uid,noteToFirestore;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:uid=getState().auth.uid;if(!note.url){delete note.url;}noteToFirestore=_objectSpread({},note);delete noteToFirestore.id;_context3.next=6;return db.doc(\"\".concat(uid,\"/journal/notes/\").concat(note.id)).update(noteToFirestore);case 6:dispatch(refreshNote(note.id,noteToFirestore));Swal.fire('Saved',note.title,'success');case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4,_x5){return _ref3.apply(this,arguments);};}();};export var refreshNote=function refreshNote(id,note){return{type:types.notesUpdated,payload:{id:id,note:_objectSpread({id:id},note)}};};//cloudinary\n//react-journal\nexport var startUploading=function startUploading(file){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var activeNote,fileUrl;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:activeNote=getState().notes.active;Swal.fire({title:'Uploading...',text:'Please wait...',allowOutsideClick:false,willOpen:function willOpen(){Swal.showLoading();}});_context4.next=4;return fileUpload(file);case 4:fileUrl=_context4.sent;activeNote.url=fileUrl;dispatch(startSaveNote(activeNote));Swal.close();case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x6,_x7){return _ref4.apply(this,arguments);};}();};export var startDeleting=function startDeleting(id){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var uid;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:uid=getState().auth.uid;_context5.next=3;return db.doc(\"\".concat(uid,\"/journal/notes/\").concat(id)).delete();case 3:dispatch(deleteNote(id));case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x8,_x9){return _ref5.apply(this,arguments);};}();};export var deleteNote=function deleteNote(id){return{type:types.notesDelete,payload:id}//Swal.fire('')\n;};export var noteLogout=function noteLogout(){return{type:types.notesLogoutCleaning};};","map":{"version":3,"sources":["/home/juan/dev/portfolio/react-2/src/actions/notes.js"],"names":["Swal","db","fileUpload","loadNotes","types","startNewNote","dispatch","getState","uid","auth","newNote","title","body","date","Date","getTime","collection","add","doc","activeNote","id","addNewNote","note","type","notesActive","payload","notesAddNew","startLoadingNotes","notes","setNotes","notesLoad","startSaveNote","url","noteToFirestore","update","refreshNote","fire","notesUpdated","startUploading","file","active","text","allowOutsideClick","willOpen","showLoading","fileUrl","close","startDeleting","delete","deleteNote","notesDelete","noteLogout","notesLogoutCleaning"],"mappings":"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","sourcesContent":["import Swal from 'sweetalert2';\n\nimport { db } from '../firebase/firebase-config';\nimport { fileUpload } from '../helpers/fileUpload';\nimport { loadNotes } from '../helpers/loadNotes';\nimport { types } from '../types/types';\n\n\n\nexport const startNewNote = () => {\n  return async(dispatch, getState) => {\n    const {uid} = getState().auth;\n    \n    const newNote = {\n      title: '',\n      body: '',\n      date: new Date().getTime()\n    }\n\n    const doc = await db.collection(`${uid}/journal/notes`).add(newNote)\n    \n    dispatch (activeNote(doc.id, newNote));\n    dispatch (addNewNote(doc.id, newNote ));\n  }\n}\n\nexport const activeNote = (id, note) => ({\n  type: types.notesActive,\n  payload: {\n    id,\n    ...note\n  }\n});\n\nexport const addNewNote = (id, note) => ({\n  type: types.notesAddNew,\n  payload: {\n    id,\n    ...note\n  }\n})\n\n\nexport const startLoadingNotes = (uid) => {\n  return async ( dispatch ) => {\n    const notes = await loadNotes(uid)\n    dispatch(setNotes(notes))\n  }\n}\n\nexport const setNotes = (notes) => ({\n  type: types.notesLoad,\n  payload: notes\n});\n\nexport const startSaveNote = (note) => {\n  return async (dispatch, getState) => {\n    const {uid} = getState().auth;\n\n    if(!note.url) {\n      delete note.url;\n    }\n\n    const noteToFirestore = {...note};\n    delete noteToFirestore.id;\n\n    await db.doc(`${uid}/journal/notes/${note.id}`).update(noteToFirestore);\n    \n    dispatch(refreshNote(note.id, noteToFirestore))\n    Swal.fire('Saved', note.title, 'success')\n  }\n}\n\nexport const refreshNote = ( id, note) => ({\n  type: types.notesUpdated,\n  payload: {\n    id, \n    note: {\n      id, \n      ...note\n    }\n  }\n})\n//cloudinary\n//react-journal\n\nexport const startUploading =  (file) => {\n  return async( dispatch, getState ) => {\n\n    const {active:activeNote} = getState().notes;\n\n    Swal.fire({\n      title: 'Uploading...',\n      text: 'Please wait...',\n      allowOutsideClick: false,\n      willOpen: () => {\n        Swal.showLoading();\n      }\n    })\n\n    const fileUrl = await fileUpload(file)\n    activeNote.url = fileUrl\n\n    dispatch(startSaveNote(activeNote))\n\n    Swal.close()\n  }\n}\n\nexport const startDeleting = (id) => {\n  return async(dispatch, getState) => {\n    const uid = getState().auth.uid;\n    await db.doc(`${uid}/journal/notes/${id}`).delete();\n\n    dispatch(deleteNote(id));\n\n  }\n} \n\nexport const deleteNote = (id) => ({\n  type: types.notesDelete,\n  payload: id\n}\n  //Swal.fire('')\n)\n\nexport const noteLogout = () => ({\n  type: types.notesLogoutCleaning\n})"]},"metadata":{},"sourceType":"module"}